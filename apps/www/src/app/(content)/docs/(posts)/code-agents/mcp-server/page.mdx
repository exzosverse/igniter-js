# MCP Server do Igniter.js

O **MCP Server do Igniter.js** √© uma implementa√ß√£o completa do Model Context Protocol (MCP) que transforma seu projeto Igniter.js em um servidor de ferramentas para AI Agents. Ele permite que Code Agents como Cursor, Claude Code, VS Code Copilot e outros acessem e utilizem seu projeto atrav√©s de uma interface padronizada e segura.

## O que √© o MCP Server?

O **Model Context Protocol (MCP)** √© um protocolo aberto que padroniza como aplica√ß√µes fornecem contexto para Large Language Models (LLMs). Pense no MCP como uma porta USB-C para aplica√ß√µes de IA - assim como o USB-C fornece uma maneira padronizada de conectar seus dispositivos a v√°rios perif√©ricos, o MCP fornece uma maneira padronizada de conectar modelos de IA a diferentes fontes de dados e ferramentas.

### Por que usar o MCP Server?

- **ü§ñ AI-Native**: Seu projeto se torna nativamente compat√≠vel com AI Agents
- **üîß Ferramentas Padronizadas**: Todas as funcionalidades s√£o expostas como ferramentas MCP padronizadas
- **üîÑ Integra√ß√£o Universal**: Funciona com qualquer cliente MCP compat√≠vel
- **üõ°Ô∏è Seguro**: Execu√ß√£o isolada e controle granular sobre permiss√µes
- **üìö Contexto Rico**: Fornece acesso completo ao seu projeto e c√≥digo

## Arquitetura do MCP Server

```mermaid
graph TB
    subgraph "AI Agent (Cliente MCP)"
        A[Code Agent]
        B[Cursor/Claude/GPT]
    end
    
    subgraph "MCP Server do Igniter.js"
        C[MCP Server]
        D[Tool Registry]
        E[Memory Manager]
        F[Task Manager]
    end
    
    subgraph "Seu Projeto Igniter.js"
        G[API Endpoints]
        H[Database]
        I[File System]
        J[CLI Tools]
    end
    
    A --> C
    B --> C
    C --> D
    C --> E
    C --> F
    D --> G
    E --> H
    F --> I
    F --> J
    
    style C fill:#3b82f6
    style D fill:#10b981
    style E fill:#f59e0b
    style F fill:#ef4444
```

## Ferramentas Disponibilizadas

O MCP Server do Igniter.js exp√µe uma ampla gama de ferramentas organizadas em categorias:

### üõ†Ô∏è Ferramentas de Desenvolvimento

- **CLI Tools**: Execu√ß√£o de comandos `igniter dev`, `igniter build`, `igniter test`
- **Build & Test**: Compila√ß√£o, testes e valida√ß√£o do projeto
- **File Analysis**: An√°lise de estrutura de arquivos e c√≥digo TypeScript

### üîç Ferramentas de Investiga√ß√£o

- **Code Investigation**: Busca de implementa√ß√µes, s√≠mbolos e depend√™ncias
- **API Validation**: Teste de endpoints e valida√ß√£o de especifica√ß√µes OpenAPI
- **Documentation Access**: Acesso a documenta√ß√£o externa e interna

### üìö Ferramentas de Mem√≥ria e Conhecimento

- **Memory Management**: Sistema de mem√≥ria baseado em MDX para persist√™ncia de conhecimento
- **Task Management**: Gerenciamento completo de tarefas e projetos
- **Relationship Mapping**: Mapeamento de relacionamentos entre diferentes tipos de mem√≥ria

### ü§ñ Ferramentas de Delega√ß√£o de Agentes

- **Agent Delegation**: Delega√ß√£o de tarefas para agentes especializados
- **Background Execution**: Execu√ß√£o em background com monitoramento
- **Multi-Agent Support**: Suporte para Claude, Gemini, GPT e agentes customizados

### üîó Integra√ß√£o com GitHub

- **Issue Management**: Cria√ß√£o e busca de issues do GitHub
- **Code Search**: Busca de c√≥digo em reposit√≥rios
- **Repository Integration**: Integra√ß√£o completa com o ecossistema GitHub

## Como Funciona

### 1. Descoberta de Ferramentas

O cliente MCP descobre automaticamente todas as ferramentas dispon√≠veis:

```json
{
  "method": "tools/list",
  "params": {},
  "result": {
    "tools": [
      {
        "name": "analyze_file",
        "title": "Analyze File",
        "description": "Analyzes the structure, imports, exports, functions, and TypeScript errors of a file.",
        "inputSchema": {
          "filePath": "string",
          "includeErrors": "boolean",
          "projectRoot": "string?"
        }
      }
    ]
  }
}
```

### 2. Execu√ß√£o de Ferramentas

O cliente pode executar qualquer ferramenta dispon√≠vel:

```json
{
  "method": "tools/call",
  "params": {
    "name": "analyze_file",
    "arguments": {
      "filePath": "src/features/user-management/controller.ts",
      "includeErrors": true
    }
  }
}
```

### 3. Resposta Estruturada

A ferramenta retorna resultados estruturados e acion√°veis:

```json
{
  "result": {
    "content": [
      {
        "type": "text",
        "text": "File analysis complete: 0 errors, 2 warnings, healthy status"
      }
    ]
  }
}
```

## Configura√ß√£o

### Instala√ß√£o

O MCP Server j√° est√° inclu√≠do em todos os starters oficiais do Igniter.js. Para projetos existentes:

```bash
npm install @igniter-js/mcp-server
```

### Configura√ß√£o B√°sica

```typescript
// src/igniter.ts
import { createMcpServer } from '@igniter-js/mcp-server';

export const igniter = Igniter
  .context<IgniterAppContext>()
  // ... outras configura√ß√µes
  .mcp(createMcpServer({
    // Configura√ß√µes do MCP Server
    enableMemoryManager: true,
    enableTaskManager: true,
    enableAgentDelegation: true
  }))
  .build();
```

### Vari√°veis de Ambiente

```bash
# Para agentes de delega√ß√£o
ANTHROPIC_API_KEY=your_claude_key
GOOGLE_API_KEY=your_gemini_key
OPENAI_API_KEY=your_gpt_key

# Para integra√ß√£o GitHub
GITHUB_TOKEN=your_github_token
```

## Casos de Uso

### üéØ Desenvolvimento Assistido por IA

```typescript
// O AI Agent pode analisar seu c√≥digo automaticamente
analyze_feature({
  featurePath: "src/features/user-management",
  includeStats: true
})

// E sugerir melhorias baseadas na an√°lise
```

### üîÑ Gerenciamento de Tarefas

```typescript
// Criar tarefas automaticamente
create_task({
  title: "Implementar valida√ß√£o de email",
  content: "Adicionar valida√ß√£o Zod para emails",
  priority: "high",
  assignee: "agent"
})

// Delegar para agentes especializados
delegate_to_agent({
  task_id: "task-123",
  agent_type: "claude",
  execution_mode: "background"
})
```

### üìä An√°lise de Projeto

```typescript
// Obter estat√≠sticas completas do projeto
get_task_statistics({
  include_delegation_insights: true
})

// Encontrar candidatos para delega√ß√£o
find_delegation_candidates({
  complexity_threshold: "medium",
  max_estimated_hours: 8
})
```

## Integra√ß√£o com Code Agents

### Cursor

```json
// .cursor/rules/igniter-mcp.mdc
---
alwaysApply: true
---
# Igniter.js MCP Server Expert

Este projeto usa o MCP Server do Igniter.js. Use as ferramentas MCP dispon√≠veis para:
- Analisar c√≥digo e estrutura do projeto
- Gerenciar tarefas e delega√ß√µes
- Executar comandos CLI
- Investigar depend√™ncias e implementa√ß√µes

Sempre use as ferramentas MCP apropriadas em vez de tentar acessar o projeto diretamente.
```

### Claude Code

```json
// .cursorrules
Voc√™ √© um especialista em Igniter.js com acesso ao MCP Server. Use as ferramentas dispon√≠veis para:
1. Analisar c√≥digo e estrutura
2. Gerenciar tarefas e projetos
3. Executar comandos e valida√ß√µes
4. Investigar depend√™ncias

Sempre prefira usar as ferramentas MCP sobre acesso direto ao c√≥digo.
```

### VS Code Copilot

```json
// .github/copilot/README.md
Este projeto integra com o MCP Server do Igniter.js. O Copilot pode:
- Usar ferramentas de an√°lise de c√≥digo
- Acessar o sistema de gerenciamento de tarefas
- Executar comandos CLI do projeto
- Investigar estrutura e depend√™ncias
```

## Monitoramento e Debugging

### Verificar Status do Servidor

```typescript
// Verificar ambiente dos agentes
check_agent_environment({
  check_docker: true,
  check_api_keys: true,
  detailed_report: true
})
```

### Monitorar Execu√ß√µes

```typescript
// Listar delega√ß√µes ativas
list_active_delegations({
  include_recent: true,
  max_results: 20
})

// Verificar status espec√≠fico
check_delegation_status({
  task_id: "task-123"
})
```

### Logs e Analytics

```typescript
// Monitorar tarefas dos agentes
monitor_agent_tasks({
  agent_type: "all",
  include_logs: true,
  include_analytics: true
})
```

## Pr√≥ximos Passos

1. **Explore as Ferramentas**: Use `tools/list` para descobrir todas as funcionalidades dispon√≠veis
2. **Configure seu Ambiente**: Configure as vari√°veis de ambiente necess√°rias
3. **Teste a Integra√ß√£o**: Conecte seu Code Agent favorito ao MCP Server
4. **Personalize**: Ajuste as configura√ß√µes para suas necessidades espec√≠ficas

## Recursos Adicionais

- [Documenta√ß√£o Oficial do MCP](https://modelcontextprotocol.io/)
- [Especifica√ß√£o do Protocolo](https://modelcontextprotocol.io/specification/latest)
- [Exemplos de Implementa√ß√£o](https://github.com/modelcontextprotocol/servers)
- [Comunidade MCP](https://modelcontextprotocol.io/community)

---

O MCP Server do Igniter.js transforma seu projeto em uma plataforma verdadeiramente AI-native, permitindo que Code Agents trabalhem com seu c√≥digo de forma inteligente e eficiente. Comece explorando as ferramentas dispon√≠veis e descubra como a IA pode acelerar seu desenvolvimento!

